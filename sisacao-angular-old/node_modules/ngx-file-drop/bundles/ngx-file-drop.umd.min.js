!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-file-drop",["exports","@angular/core","rxjs"],t):t(e["ngx-file-drop"]={},e.ng.core,e.rxjs)}(this,function(e,i,a){"use strict";var p=function(e,t){this.relativePath=e,this.fileEntry=t},l=function(e){this.files=e},t=function(){function e(e,t){var n=this;this.zone=e,this.renderer=t,this.headertext="",this.customstyle=null,this.disableIf=!1,this.onFileDrop=new i.EventEmitter,this.onFileOver=new i.EventEmitter,this.onFileLeave=new i.EventEmitter,this.stack=[],this.files=[],this.dragoverflag=!1,this.globalDisable=!1,this.numOfActiveReadEntries=0,this.customstyle||(this.customstyle="drop-zone"),this.globalStart=this.renderer.listen("document","dragstart",function(e){n.globalDisable=!0}),this.globalEnd=this.renderer.listen("document","dragend",function(e){n.globalDisable=!1})}return e.prototype.onDragOver=function(e){this.globalDisable||this.disableIf||(this.dragoverflag||(this.dragoverflag=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragLeave=function(e){this.globalDisable||this.disableIf||(this.dragoverflag&&(this.dragoverflag=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))},e.prototype.dropFiles=function(o){var t=this;if(!this.globalDisable&&!this.disableIf){this.dragoverflag=!1,o.dataTransfer.dropEffect="copy";var e=void 0;e=o.dataTransfer.items?o.dataTransfer.items.length:o.dataTransfer.files.length;for(var n=function(e){var t=void 0;if(o.dataTransfer.items?o.dataTransfer.items[e].webkitGetAsEntry&&(t=o.dataTransfer.items[e].webkitGetAsEntry()):o.dataTransfer.files[e].webkitGetAsEntry&&(t=o.dataTransfer.files[e].webkitGetAsEntry()),t)if(t.isFile){r=new p(t.name,t);s.addToQueue(r)}else t.isDirectory&&s.traverseFileTree(t,t.name);else{var n=o.dataTransfer.files[e];if(n){var i={name:n.name,isDirectory:!1,isFile:!0,file:function(e){e(n)}},r=new p(i.name,i);s.addToQueue(r)}}},s=this,i=0;i<e;i++)n(i);this.preventAndStop(o);var r=a.timer(200,200);this.subscription=r.subscribe(function(e){0<t.files.length&&0===t.numOfActiveReadEntries&&(t.onFileDrop.emit(new l(t.files)),t.files=[])})}},e.prototype.traverseFileTree=function(r,o){var e=this;if(r.isFile){var t=new p(o,r);this.files.push(t),this.zone.run(function(){e.popToStack()})}else{this.pushToStack(o),o+="/";var n=r.createReader(),s=[],a=this,l=function(){a.numOfActiveReadEntries++,n.readEntries(function(e){if(e.length)s=s.concat(e),l();else{if(0===s.length){var t=new p(o,r);a.zone.run(function(){a.addToQueue(t)})}else for(var n=function(e){a.zone.run(function(){a.traverseFileTree(s[e],o+s[e].name)})},i=0;i<s.length;i++)n(i);a.zone.run(function(){a.popToStack()})}a.numOfActiveReadEntries--})};l()}},e.prototype.addToQueue=function(e){this.files.push(e)},e.prototype.pushToStack=function(e){this.stack.push(e)},e.prototype.popToStack=function(){this.stack.pop()},e.prototype.clearQueue=function(){this.files=[]},e.prototype.preventAndStop=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe(),this.globalStart(),this.globalEnd()},e}();t.decorators=[{type:i.Component,args:[{selector:"file-drop",template:'<div id="dropZone"  [className]="customstyle" [class.over]="dragoverflag"\n    (drop)="dropFiles($event)"\n    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">\n    <div class="content">\n        <ng-content></ng-content>\n        {{headertext}}\n    </div>\n</div>\n',styles:[".drop-zone{margin:auto;height:100px;border:2px dotted #0782d0;border-radius:30px}.content{color:#0782d0;height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.over{background-color:rgba(147,147,147,.5)}"]}]}],t.ctorParameters=function(){return[{type:i.NgZone},{type:i.Renderer}]},t.propDecorators={headertext:[{type:i.Input}],customstyle:[{type:i.Input}],disableIf:[{type:i.Input}],onFileDrop:[{type:i.Output}],onFileOver:[{type:i.Output}],onFileLeave:[{type:i.Output}]};var n=function(){};n.decorators=[{type:i.NgModule,args:[{declarations:[t],exports:[t],imports:[],providers:[],bootstrap:[t]}]}],e.FileComponent=t,e.FileDropModule=n,e.UploadFile=p,e.UploadEvent=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-file-drop.umd.min.js.map
